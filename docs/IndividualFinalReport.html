<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pauline Robert">

<title>Individual Final Report - Analyzing Airbnb Market Trends for NYC in 2019 and 2023 – STA 9750 2024 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 2024 Submission Material</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="./mp01.html">
 <span class="dropdown-text">Mini Project 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mp02.html">
 <span class="dropdown-text">Mini Project 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mp03.html">
 <span class="dropdown-text">Mini Project 3</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./contact.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Individual Final Report - Analyzing Airbnb Market Trends for NYC in 2019 and 2023</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pauline Robert </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<center>
<img src="Airbnb-logo.png" style="width:70.0%;height:70.0%">
</center>
<p>As members of the <strong>Listing Legends</strong> team, our project explored the impact of property characteristics such as type, location, and availability, and host reputation, including reviews and the number of listings, on Airbnb pricing in NYC. Our analysis draws on data from 2019 and 2023 that we retrived from Kaggle.</p>
<p>My specific question for this project was to focus on the influence of the Airbnb listing locations on the price per night. When landlords and tenants list their home or a room of their apartment on Airbnb, the general motivation to determine the price per night is to cover a part of the amount of rent they pay per month or the mortgage they need to reimburse. That is why I chose to compare the average price per night per neighborhood group on Airbnb to the average median asking rent per borough in New York City. <a href="https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;opi=89978449&amp;url=https://streeteasy.com/blog/data-dashboard/&amp;ved=2ahUKEwjwjqCO0J6KAxXkl4kEHWuoHFAQFnoECBUQAQ&amp;usg=AOvVaw1zdIm6ptJWPKsGgQN1weVB">StreetEasy</a> provides data about the housing market of NYC from 2010 to 2024.</p>
<section id="streeteasy-data-manipulation" class="level2">
<h2 class="anchored" data-anchor-id="streeteasy-data-manipulation">StreetEasy Data Manipulation</h2>
<section id="data-downloading" class="level3">
<h3 class="anchored" data-anchor-id="data-downloading">1. Data Downloading</h3>
<p>To start my analysis, I downloaded all the necessary library packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The next step is to download the <a href="https://cdn-charts.streeteasy.com/rentals/All/medianAskingRent_All.zip?_ga=2.55931043.945781993.1730314388-725217219.1730314388">Median Asking Rent per Borough</a> from StreetEasy with the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to safely download and extract the dataset</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>safe_download_extract <span class="ot">&lt;-</span> <span class="cf">function</span>(url, zip_file, extract_dir) {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(url, <span class="at">destfile =</span> zip_file, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">file.exists</span>(zip_file)) {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unzip</span>(zip_file, <span class="at">exdir =</span> extract_dir)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"Failed to download the file."</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"Error in downloading or extracting: "</span>, e<span class="sc">$</span>message)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to safely read CSV</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>safe_read_csv <span class="ot">&lt;-</span> <span class="cf">function</span>(file_path) {</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file_path)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nrow</span>(df) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(df)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"The CSV file is empty."</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"Error reading CSV: "</span>, e<span class="sc">$</span>message)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Main execution</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">'https://cdn-charts.streeteasy.com/rentals/All/medianAskingRent_All.zip?_ga=2.55931043.945781993.1730314388-725217219.1730314388'</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>zip_file <span class="ot">&lt;-</span> <span class="st">"medianAskingRent_All.zip"</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>extract_dir <span class="ot">&lt;-</span> <span class="st">"StreetEasyAskingRentData"</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>data_file_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(extract_dir, <span class="st">"medianAskingRent_All.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualization" class="level3">
<h3 class="anchored" data-anchor-id="visualization">2. Visualization</h3>
<p>After our data has been downloaded and unzip in our files, we can start visualizing our data. I chose to code a bar chart because it is easy ti interpret and clearly show differences in values between groups, helping to analyze trends over time.</p>
<p>Our columns in the StreetEasy datasets are named as following “2010-01”. So we first have the Year and then the Month number. In order to be able to regroup only the values for 2019 and 2023, I used the <span style="background-color: #f3f0ff; color: purple; font-family: monospace;">pivot_longer()</span> function to “melt” the dataframe, transforming the wide-format data with columns for each month into a long-format structure. This makes it easier to group, filter, and summarize the data by borough. The long format also simplifies plotting and statistical operations, as it aligns each value with its corresponding borough and time period in a single column. Here is the code for 2019 Average Median Asking Price per Borough in NYC visual:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Download and extract</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">safe_download_extract</span>(url, zip_file, extract_dir)) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Failed to download or extract the dataset."</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Load the data</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">safe_read_csv</span>(data_file_path)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.null</span>(df)) {</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Failed to read the CSV file."</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Prepare the Data</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only the columns for 2019</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>cols_2019 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"areaName"</span>, <span class="st">"Borough"</span>, <span class="st">"areaType"</span>, <span class="fu">grep</span>(<span class="st">"^2019-"</span>, <span class="fu">names</span>(df), <span class="at">value =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>df_2019 <span class="ot">&lt;-</span> df[, cols_2019]</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Melt the dataframe</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>df_melted <span class="ot">&lt;-</span> df_2019 <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"2019-"</span>),</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"YearMonth"</span>,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"MedianAskingRent"</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>df_melted<span class="sc">$</span>YearMonth <span class="ot">&lt;-</span> <span class="fu">ym</span>(df_melted<span class="sc">$</span>YearMonth)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average median rent per borough for 2019</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>avg_median_rent_2019 <span class="ot">&lt;-</span> df_melted <span class="sc">%&gt;%</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MedianAskingRent =</span> <span class="fu">mean</span>(MedianAskingRent, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar chart for 2019 with custom colors</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>color_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Manhattan'</span> <span class="ot">=</span> <span class="st">'#7FD4C1'</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Brooklyn'</span> <span class="ot">=</span> <span class="st">'#30BFDD'</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Queens'</span> <span class="ot">=</span> <span class="st">'#8690FF'</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Bronx'</span> <span class="ot">=</span> <span class="st">'#ACD0F4'</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Staten Island'</span> <span class="ot">=</span> <span class="st">'#F7C0BB'</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>fig_ST_2019 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(avg_median_rent_2019, <span class="at">x =</span> <span class="sc">~</span>Borough, <span class="at">y =</span> <span class="sc">~</span>MedianAskingRent, <span class="at">type =</span> <span class="st">'bar'</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="sc">~</span>Borough, <span class="at">colors =</span> color_map) <span class="sc">%&gt;%</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Average Median Asking Rent by Borough in 2019 in NYC&lt;br&gt;&lt;sup&gt;Data from StreetEasy&lt;/sup&gt;'</span>,</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Borough'</span>),</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Average Median Asking Rent'</span>),</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">paper_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="dv">600</span>,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="dv">600</span>)</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>fig_ST_2019</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-1f54f586a386704d65ae" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-1f54f586a386704d65ae">{"x":{"visdat":{"438b1f425eda":["function () ","plotlyVisDat"]},"cur_data":"438b1f425eda","attrs":{"438b1f425eda":{"x":{},"y":{},"color":{},"colors":["#7FD4C1","#30BFDD","#8690FF","#ACD0F4","#F7C0BB"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"width":600,"height":600,"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Average Median Asking Rent by Borough in 2019 in NYC<br><sup>Data from StreetEasy<\/sup>","xaxis":{"domain":[0,1],"automargin":true,"title":"Borough","type":"category","categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Median Asking Rent"},"plot_bgcolor":"white","paper_bgcolor":"white","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Bronx"],"y":[1864.607973421927],"type":"bar","name":"Bronx","marker":{"color":"rgba(172,208,244,1)","line":{"color":"rgba(172,208,244,1)"}},"textfont":{"color":"rgba(172,208,244,1)"},"error_y":{"color":"rgba(172,208,244,1)"},"error_x":{"color":"rgba(172,208,244,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Brooklyn"],"y":[2569.7665505226482],"type":"bar","name":"Brooklyn","marker":{"color":"rgba(48,191,221,1)","line":{"color":"rgba(48,191,221,1)"}},"textfont":{"color":"rgba(48,191,221,1)"},"error_y":{"color":"rgba(48,191,221,1)"},"error_x":{"color":"rgba(48,191,221,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Manhattan"],"y":[3659.605022831051],"type":"bar","name":"Manhattan","marker":{"color":"rgba(127,212,193,1)","line":{"color":"rgba(127,212,193,1)"}},"textfont":{"color":"rgba(127,212,193,1)"},"error_y":{"color":"rgba(127,212,193,1)"},"error_x":{"color":"rgba(127,212,193,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Queens"],"y":[2098.3499999999999],"type":"bar","name":"Queens","marker":{"color":"rgba(134,144,255,1)","line":{"color":"rgba(134,144,255,1)"}},"textfont":{"color":"rgba(134,144,255,1)"},"error_y":{"color":"rgba(134,144,255,1)"},"error_x":{"color":"rgba(134,144,255,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Staten Island"],"y":[2017.75],"type":"bar","name":"Staten Island","marker":{"color":"rgba(247,192,187,1)","line":{"color":"rgba(247,192,187,1)"}},"textfont":{"color":"rgba(247,192,187,1)"},"error_y":{"color":"rgba(247,192,187,1)"},"error_x":{"color":"rgba(247,192,187,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Here is the code for 2023 Average Median Asking Price per Borough in NYC visual:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Download and extract</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">safe_download_extract</span>(url, zip_file, extract_dir)) {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Failed to download or extract the dataset."</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Load the data</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">safe_read_csv</span>(data_file_path)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.null</span>(df)) {</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Failed to read the CSV file."</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Prepare the Data</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only the columns for 2023</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>cols_2023 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"areaName"</span>, <span class="st">"Borough"</span>, <span class="st">"areaType"</span>, <span class="fu">grep</span>(<span class="st">"^2023-"</span>, <span class="fu">names</span>(df), <span class="at">value =</span> <span class="cn">TRUE</span>))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>df_2023 <span class="ot">&lt;-</span> df[, cols_2023]</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Melt the dataframe</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>df_melted <span class="ot">&lt;-</span> df_2023 <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"2023-"</span>),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"YearMonth"</span>,</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"MedianAskingRent"</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>df_melted<span class="sc">$</span>YearMonth <span class="ot">&lt;-</span> <span class="fu">ym</span>(df_melted<span class="sc">$</span>YearMonth)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average median rent per borough for 2023</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>avg_median_rent_2023 <span class="ot">&lt;-</span> df_melted <span class="sc">%&gt;%</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MedianAskingRent =</span> <span class="fu">mean</span>(MedianAskingRent, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar chart for 2023 with custom colors</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>color_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Manhattan'</span> <span class="ot">=</span> <span class="st">'#7FD4C1'</span>,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Brooklyn'</span> <span class="ot">=</span> <span class="st">'#30BFDD'</span>,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Queens'</span> <span class="ot">=</span> <span class="st">'#8690FF'</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Bronx'</span> <span class="ot">=</span> <span class="st">'#ACD0F4'</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Staten Island'</span> <span class="ot">=</span> <span class="st">'#F7C0BB'</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>fig_ST_2023 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(avg_median_rent_2023, <span class="at">x =</span> <span class="sc">~</span>Borough, <span class="at">y =</span> <span class="sc">~</span>MedianAskingRent, <span class="at">type =</span> <span class="st">'bar'</span>,</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="sc">~</span>Borough, <span class="at">colors =</span> color_map) <span class="sc">%&gt;%</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Average Median Asking Rent by Borough in 2023 in NYC&lt;br&gt;&lt;sup&gt;Data from StreetEasy&lt;/sup&gt;'</span>,</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Borough'</span>),</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Average Median Asking Rent'</span>),</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">paper_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="dv">600</span>,</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="dv">600</span>)</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>fig_ST_2023</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-fcfc26dfd79652b7c652" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fcfc26dfd79652b7c652">{"x":{"visdat":{"438b65514c70":["function () ","plotlyVisDat"]},"cur_data":"438b65514c70","attrs":{"438b65514c70":{"x":{},"y":{},"color":{},"colors":["#7FD4C1","#30BFDD","#8690FF","#ACD0F4","#F7C0BB"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"width":600,"height":600,"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Average Median Asking Rent by Borough in 2023 in NYC<br><sup>Data from StreetEasy<\/sup>","xaxis":{"domain":[0,1],"automargin":true,"title":"Borough","type":"category","categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Median Asking Rent"},"plot_bgcolor":"white","paper_bgcolor":"white","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Bronx"],"y":[2254.0786516853932],"type":"bar","name":"Bronx","marker":{"color":"rgba(172,208,244,1)","line":{"color":"rgba(172,208,244,1)"}},"textfont":{"color":"rgba(172,208,244,1)"},"error_y":{"color":"rgba(172,208,244,1)"},"error_x":{"color":"rgba(172,208,244,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Brooklyn"],"y":[3266.6854130052716],"type":"bar","name":"Brooklyn","marker":{"color":"rgba(48,191,221,1)","line":{"color":"rgba(48,191,221,1)"}},"textfont":{"color":"rgba(48,191,221,1)"},"error_y":{"color":"rgba(48,191,221,1)"},"error_x":{"color":"rgba(48,191,221,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Manhattan"],"y":[4527.2361111111122],"type":"bar","name":"Manhattan","marker":{"color":"rgba(127,212,193,1)","line":{"color":"rgba(127,212,193,1)"}},"textfont":{"color":"rgba(127,212,193,1)"},"error_y":{"color":"rgba(127,212,193,1)"},"error_x":{"color":"rgba(127,212,193,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Queens"],"y":[2535.7033707865171],"type":"bar","name":"Queens","marker":{"color":"rgba(134,144,255,1)","line":{"color":"rgba(134,144,255,1)"}},"textfont":{"color":"rgba(134,144,255,1)"},"error_y":{"color":"rgba(134,144,255,1)"},"error_x":{"color":"rgba(134,144,255,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Staten Island"],"y":[2095.3333333333335],"type":"bar","name":"Staten Island","marker":{"color":"rgba(247,192,187,1)","line":{"color":"rgba(247,192,187,1)"}},"textfont":{"color":"rgba(247,192,187,1)"},"error_y":{"color":"rgba(247,192,187,1)"},"error_x":{"color":"rgba(247,192,187,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="kaggle-airbnb-data-manipulation" class="level2">
<h2 class="anchored" data-anchor-id="kaggle-airbnb-data-manipulation">Kaggle Airbnb Data Manipulation</h2>
<section id="data-downloading-1" class="level3">
<h3 class="anchored" data-anchor-id="data-downloading-1">1. Data Downloading</h3>
<p>For the data collected from Kaggle, I dowloaded the data sets directly from the Kaggle website. We use for 2019 the data set from the Kaggle project <a href="https://www.kaggle.com/datasets/dgomonov/new-york-city-airbnb-open-data">New York City Airbnb Open Data</a>, and for 2023, we took the data set <a href="https://www.kaggle.com/datasets/godofoutcasts/new-york-city-airbnb-2023-public-data">New York City Airbnb 2023, Public Data</a>. Both of those Kaggle projects took their data from <a href="https://insideairbnb.com">Inside Airbnb</a>. This website provides a lot of different data about Airbnb but getting that data is not free, that is why we chose to download those data sets from Kaggle.</p>
<p>Once the data sets are downloaded into our files, we can start building our visual.</p>
</section>
<section id="visualization-1" class="level3">
<h3 class="anchored" data-anchor-id="visualization-1">2. Visualization</h3>
<p>For my visual, I am going to focus on the columns “price” and “neighborhood_group”. After exploring the details of the values inside those columns, I realized that the column “price” has very high values. This might be explained by the fact that there are in NYC some more high-end Airbnb listing and therefor it attracts the average night price up which can make our observations not really accurate as most of those luxury listings are mostly based in Manhattan. To have a more realistic visual, I decided to handle those outliers and replace them by the mean so that we do not drop all those listing numbers.</p>
<p>Here is the code to handle the outliers and create the visual:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Load the datasets</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df_2019 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'AB_NYC_2019.csv'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>df_2023 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'NYC-Airbnb-2023.csv'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Replace outliers in the 'price' column with the mean</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>replace_outliers_with_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, column, <span class="at">lower_quantile =</span> <span class="fl">0.05</span>, <span class="at">upper_quantile =</span> <span class="fl">0.95</span>) {</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  lower_bound <span class="ot">&lt;-</span> <span class="fu">quantile</span>(df[[column]], lower_quantile)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  upper_bound <span class="ot">&lt;-</span> <span class="fu">quantile</span>(df[[column]], upper_quantile)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  mean_value <span class="ot">&lt;-</span> <span class="fu">mean</span>(df[[column]][df[[column]] <span class="sc">&gt;=</span> lower_bound <span class="sc">&amp;</span> df[[column]] <span class="sc">&lt;=</span> upper_bound])</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  df[[column]] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df[[column]] <span class="sc">&lt;</span> lower_bound <span class="sc">|</span> df[[column]] <span class="sc">&gt;</span> upper_bound, mean_value, df[[column]])</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>df_2019_clean <span class="ot">&lt;-</span> <span class="fu">replace_outliers_with_mean</span>(df_2019, <span class="st">'price'</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>df_2023_clean <span class="ot">&lt;-</span> <span class="fu">replace_outliers_with_mean</span>(df_2023, <span class="st">'price'</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Calculate average price per neighborhood_group</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>avg_price_2019 <span class="ot">&lt;-</span> df_2019_clean <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(neighbourhood_group) <span class="sc">%&gt;%</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">price =</span> <span class="fu">mean</span>(price))</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>avg_price_2023 <span class="ot">&lt;-</span> df_2023_clean <span class="sc">%&gt;%</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(neighbourhood_group) <span class="sc">%&gt;%</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">price =</span> <span class="fu">mean</span>(price))</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Create bar charts for 2019 and 2023</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>color_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Manhattan'</span> <span class="ot">=</span> <span class="st">'#7FD4C1'</span>,</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Brooklyn'</span> <span class="ot">=</span> <span class="st">'#30BFDD'</span>,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Queens'</span> <span class="ot">=</span> <span class="st">'#8690FF'</span>,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Bronx'</span> <span class="ot">=</span> <span class="st">'#ACD0F4'</span>,</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Staten Island'</span> <span class="ot">=</span> <span class="st">'#F7C0BB'</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>fig_2019 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(avg_price_2019, <span class="at">x =</span> <span class="sc">~</span>neighbourhood_group, <span class="at">y =</span> <span class="sc">~</span>price, <span class="at">type =</span> <span class="st">'bar'</span>,</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>                    <span class="at">color =</span> <span class="sc">~</span>neighbourhood_group, <span class="at">colors =</span> color_map) <span class="sc">%&gt;%</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Average Airbnb Price by Neighborhood Group in NYC (2019)&lt;br&gt;&lt;sup&gt;Data from Airbnb&lt;/sup&gt;'</span>,</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Neighborhood Group'</span>),</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Average Price ($)'</span>),</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">paper_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="dv">600</span>,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="dv">600</span>)</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>fig_2023 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(avg_price_2023, <span class="at">x =</span> <span class="sc">~</span>neighbourhood_group, <span class="at">y =</span> <span class="sc">~</span>price, <span class="at">type =</span> <span class="st">'bar'</span>,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>                    <span class="at">color =</span> <span class="sc">~</span>neighbourhood_group, <span class="at">colors =</span> color_map) <span class="sc">%&gt;%</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Average Airbnb Price by Neighborhood Group in NYC (2023)&lt;br&gt;&lt;sup&gt;Data from Airbnb&lt;/sup&gt;'</span>,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Neighborhood Group'</span>),</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Average Price ($)'</span>),</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>         <span class="at">paper_bgcolor =</span> <span class="st">'white'</span>,</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="dv">600</span>,</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is our visual for 2019:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>fig_2019</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b8b1010f259552412830" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b8b1010f259552412830">{"x":{"visdat":{"438b3fce1191":["function () ","plotlyVisDat"]},"cur_data":"438b3fce1191","attrs":{"438b3fce1191":{"x":{},"y":{},"color":{},"colors":["#7FD4C1","#30BFDD","#8690FF","#ACD0F4","#F7C0BB"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"width":600,"height":600,"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Average Airbnb Price by Neighborhood Group in NYC (2019)<br><sup>Data from Airbnb<\/sup>","xaxis":{"domain":[0,1],"automargin":true,"title":"Neighborhood Group","type":"category","categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Price ($)"},"plot_bgcolor":"white","paper_bgcolor":"white","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Bronx"],"y":[92.596871325600205],"type":"bar","name":"Bronx","marker":{"color":"rgba(172,208,244,1)","line":{"color":"rgba(172,208,244,1)"}},"textfont":{"color":"rgba(172,208,244,1)"},"error_y":{"color":"rgba(172,208,244,1)"},"error_x":{"color":"rgba(172,208,244,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Brooklyn"],"y":[113.0573638712482],"type":"bar","name":"Brooklyn","marker":{"color":"rgba(48,191,221,1)","line":{"color":"rgba(48,191,221,1)"}},"textfont":{"color":"rgba(48,191,221,1)"},"error_y":{"color":"rgba(48,191,221,1)"},"error_x":{"color":"rgba(48,191,221,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Manhattan"],"y":[148.94371096153819],"type":"bar","name":"Manhattan","marker":{"color":"rgba(127,212,193,1)","line":{"color":"rgba(127,212,193,1)"}},"textfont":{"color":"rgba(127,212,193,1)"},"error_y":{"color":"rgba(127,212,193,1)"},"error_x":{"color":"rgba(127,212,193,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Queens"],"y":[98.410745988235519],"type":"bar","name":"Queens","marker":{"color":"rgba(134,144,255,1)","line":{"color":"rgba(134,144,255,1)"}},"textfont":{"color":"rgba(134,144,255,1)"},"error_y":{"color":"rgba(134,144,255,1)"},"error_x":{"color":"rgba(134,144,255,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Staten Island"],"y":[102.50161067981769],"type":"bar","name":"Staten Island","marker":{"color":"rgba(247,192,187,1)","line":{"color":"rgba(247,192,187,1)"}},"textfont":{"color":"rgba(247,192,187,1)"},"error_y":{"color":"rgba(247,192,187,1)"},"error_x":{"color":"rgba(247,192,187,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Here is our visual for 2023:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fig_2023</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-0a46d801c9b924f3c0ae" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-0a46d801c9b924f3c0ae">{"x":{"visdat":{"438b71e36750":["function () ","plotlyVisDat"]},"cur_data":"438b71e36750","attrs":{"438b71e36750":{"x":{},"y":{},"color":{},"colors":["#7FD4C1","#30BFDD","#8690FF","#ACD0F4","#F7C0BB"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"width":600,"height":600,"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Average Airbnb Price by Neighborhood Group in NYC (2023)<br><sup>Data from Airbnb<\/sup>","xaxis":{"domain":[0,1],"automargin":true,"title":"Neighborhood Group","type":"category","categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Price ($)"},"plot_bgcolor":"white","paper_bgcolor":"white","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Bronx"],"y":[112.44997543076119],"type":"bar","name":"Bronx","marker":{"color":"rgba(172,208,244,1)","line":{"color":"rgba(172,208,244,1)"}},"textfont":{"color":"rgba(172,208,244,1)"},"error_y":{"color":"rgba(172,208,244,1)"},"error_x":{"color":"rgba(172,208,244,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Brooklyn"],"y":[137.14613904032356],"type":"bar","name":"Brooklyn","marker":{"color":"rgba(48,191,221,1)","line":{"color":"rgba(48,191,221,1)"}},"textfont":{"color":"rgba(48,191,221,1)"},"error_y":{"color":"rgba(48,191,221,1)"},"error_x":{"color":"rgba(48,191,221,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Manhattan"],"y":[176.48209752038318],"type":"bar","name":"Manhattan","marker":{"color":"rgba(127,212,193,1)","line":{"color":"rgba(127,212,193,1)"}},"textfont":{"color":"rgba(127,212,193,1)"},"error_y":{"color":"rgba(127,212,193,1)"},"error_x":{"color":"rgba(127,212,193,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Queens"],"y":[121.64384702650237],"type":"bar","name":"Queens","marker":{"color":"rgba(134,144,255,1)","line":{"color":"rgba(134,144,255,1)"}},"textfont":{"color":"rgba(134,144,255,1)"},"error_y":{"color":"rgba(134,144,255,1)"},"error_x":{"color":"rgba(134,144,255,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Staten Island"],"y":[117.90651022707711],"type":"bar","name":"Staten Island","marker":{"color":"rgba(247,192,187,1)","line":{"color":"rgba(247,192,187,1)"}},"textfont":{"color":"rgba(247,192,187,1)"},"error_y":{"color":"rgba(247,192,187,1)"},"error_x":{"color":"rgba(247,192,187,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="analysis-of-airbnb-prices-and-median-asking-rents-in-nyc" class="level2">
<h2 class="anchored" data-anchor-id="analysis-of-airbnb-prices-and-median-asking-rents-in-nyc">Analysis of Airbnb Prices and Median Asking Rents in NYC</h2>
<section id="neighborhood-group-pricing-trends" class="level4">
<h4 class="anchored" data-anchor-id="neighborhood-group-pricing-trends">2023: Neighborhood Group Pricing Trends</h4>
<p>In 2023, both Airbnb pricing and median asking rents across NYC boroughs reflect a consistent pattern where higher long-term rental costs correspond to higher short-term rental prices:</p>
<ul>
<li><strong>Manhattan</strong>:
<ul>
<li>Average Airbnb price: $160 per night<br>
</li>
<li>Median asking rent: $4,500 per month</li>
</ul></li>
<li><strong>Brooklyn</strong>:
<ul>
<li>Average Airbnb price: $140 per night<br>
</li>
<li>Median asking rent: $3,500 per month</li>
</ul></li>
<li><strong>Queens</strong>:
<ul>
<li>Average Airbnb price: $120 per night<br>
</li>
<li>Median asking rent: $2,700 per month</li>
</ul></li>
<li><strong>Staten Island</strong>:
<ul>
<li>Average Airbnb price: $100 per night<br>
</li>
<li>Median asking rent: $2,200 per month</li>
</ul></li>
<li><strong>Bronx</strong>:
<ul>
<li>Average Airbnb price: $80 per night<br>
</li>
<li>Median asking rent: $2,000 per month</li>
</ul></li>
</ul>
</section>
<section id="comparison-with-2019-data" class="level4">
<h4 class="anchored" data-anchor-id="comparison-with-2019-data">Comparison with 2019 Data</h4>
<p>In 2019, both Airbnb prices and median rents were lower, but the borough rankings remained consistent:</p>
<ul>
<li><strong>Manhattan</strong>:
<ul>
<li>Average Airbnb price: $140 per night<br>
</li>
<li>Median asking rent: $3,500 per month</li>
</ul></li>
<li><strong>Brooklyn</strong>:
<ul>
<li>Average Airbnb price: $120 per night<br>
</li>
<li>Median asking rent: $3,000 per month</li>
</ul></li>
<li><strong>Queens</strong>:
<ul>
<li>Average Airbnb price: $100 per night<br>
</li>
<li>Median asking rent: $2,400 per month</li>
</ul></li>
<li><strong>Staten Island</strong>:
<ul>
<li>Average Airbnb price: $80 per night<br>
</li>
<li>Median asking rent: $2,000 per month</li>
</ul></li>
<li><strong>Bronx</strong>:
<ul>
<li>Average Airbnb price: $60 per night<br>
</li>
<li>Median asking rent: $1,800 per month</li>
</ul></li>
</ul>
</section>
<section id="key-observations-and-insights" class="level4">
<h4 class="anchored" data-anchor-id="key-observations-and-insights">Key Observations and Insights</h4>
<ol type="1">
<li><p><strong>Consistent Borough Hierarchy</strong>:<br>
Manhattan and Brooklyn consistently lead both Airbnb and median rent markets, indicating that these boroughs are premium locations in NYC’s real estate landscape. The Bronx remains the most affordable, with the lowest prices for both markets in 2019 and 2023.</p></li>
<li><p><strong>Growth in Pricing</strong>:</p>
<ul>
<li>From 2019 to 2023, median asking rents increased sharply in Manhattan (up $1,000) and Brooklyn (up $500), reflecting rising demand or increased cost of living in these areas.<br>
</li>
<li>Similarly, Airbnb prices rose by $20 in Manhattan and Brooklyn, aligning with these broader market trends.</li>
</ul></li>
<li><p><strong>Proportional Increases</strong>:<br>
Across all boroughs, the percentage increases in Airbnb prices roughly correspond to increases in median asking rents, suggesting a direct relationship between the long-term rental market and short-term rental pricing.</p></li>
<li><p><strong>Queens and Staten Island Dynamics</strong>:<br>
Both boroughs show moderate increases in Airbnb and median rent prices, maintaining their mid-tier affordability status within the city.</p></li>
</ol>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The data clearly illustrate a strong link between median asking rents and Airbnb listing prices, with neighborhood group rankings remaining consistent over time. Manhattan and Brooklyn stand out as premium markets for both short-term and long-term rentals, driven by higher demand and rising costs. The significant price increases between 2019 and 2023 suggest broader economic and market changes, such as inflation, increased tourism, or heightened demand for housing in these areas. Further statistical analysis could provide deeper insights into the exact drivers behind these trends and their potential implications for renters and Airbnb hosts.</p>
<center>
<img src="airbnb_logo_4things.png" class="img-fluid">
</center>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/plnrbrt\.github\.io\/STA9750-2024-FALL\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>